<?xml version="1.0" encoding="UTF-8"?>

<!-- root element, all properties must be under this element -->
<jive>
  <adminConsole>
    <port><%= node[:openfire][:config][:admin_console][:port] %></port>
    <securePort><%= node[:openfire][:config][:admin_console][:secure_port] %></securePort>
  </adminConsole>
  <locale><%= node[:openfire][:config][:locale] %></locale>
<% unless node[:openfire][:config][:network][:interface].nil? -%>
  <!--
    Network settings. By default, Openfire will bind to all network interfaces.
    Alternatively, you can specify a specific network interfaces that the server
    will listen on. For example, 127.0.0.1. This setting is generally only useful
    on multi-homed servers.
   -->
  <network>
    <interface><%= node[:openfire][:config][:network][:interface] %></interface>
  </network>
<% end -%>
<% if node[:openfire][:database][:active] -%>
  <connectionProvider>
    <className>org.jivesoftware.database.DefaultConnectionProvider</className>
  </connectionProvider>
  <database>
    <defaultProvider>
      <driver><%= node[:openfire][:config][:database][:driver] %></driver>
      <serverURL><%= node[:openfire][:config][:database][:server_url] %></serverURL>
      <username><%= node[:openfire][:database][:user] %></username>
      <password><%= node[:openfire][:database][:password] %></password>
      <testSQL>select 1</testSQL>
      <testBeforeUse>true</testBeforeUse>
      <testAfterUse>true</testAfterUse>
      <minConnections>5</minConnections>
      <maxConnections>25</maxConnections>
      <connectionTimeout>1.0</connectionTimeout>
    </defaultProvider>
  </database>
<% else -%>
  <connectionProvider>
    <className>org.jivesoftware.database.EmbeddedConnectionProvider</className>
  </connectionProvider>  
<% end -%>
</jive>
